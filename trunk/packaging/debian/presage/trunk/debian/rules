#!/usr/bin/make -f

LDFLAGS += -Wl,--as-needed

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/autotools.mk

DEB_MAKE_CHECK_TARGET := check
DEB_DH_INSTALL_ARGS := --sourcedir=debian/tmp

DEB_PYTHON_SYSTEM := pysupport
include /usr/share/cdbs/1/class/python-distutils.mk

DEB_INSTALL_DOCS_ALL = 
DEB_INSTALL_DOCS_libpresage1 = README NEWS TODO AUTHORS THANKS

# 1) Workaround issue whereby CDBS cleans out autotools before cleaning
# out distutils. This results in make distclean running before python
# setup.py clean --all. Because setup.py is generated by configure, it
# will be removed by make distclean before python setup.py clean gets
# a chance to run. Hence, the python build/ directory is left over.
#
# Adding a clean target here to remove it explicitly.
#
# 2) Remove embedded tinyxml source code to ensure that build uses
# system libtinyxml
#
clean::	
	rm -rf build
	rm -f src/lib/tinyxml/*.h src/lib/tinyxml/*.cpp
